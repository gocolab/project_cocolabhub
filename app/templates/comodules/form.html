{% extends "templates/main_template.html" %}

{% block title %}CoModule Details{% endblock %}
{% block customize_css %}
<!-- Include Quill stylesheet -->
<link href="https://cdn.jsdelivr.net/npm/quill@2.0.0-beta.0/dist/quill.snow.css" rel="stylesheet" />
<style>
    .quill-editor {
        height: 5rem;
    }
</style>
{% endblock %}

{% block main_container %}
<form action="" method="post">
    <div class="row gap-3 px-5">
        <div class="form-group col-12">
            <label class="form-label" for="title">Title:</label>
            <input type="text" class="form-control" id="title" name="title" required value="Test My CoModule">
        </div>
        <div class="form-group row">
            <label for="language_name" class="col-2 form-label">Language:</label>
            <div class="col-6">
                <input type="text" class="form-control" id="language_name" name="language_name" required
                    value="T-Python">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="language_version" value="3.11">
            </div>
        </div>
        <div class="form-group row">
            <label class="form-label col-2" for="framework_name">Framework:</label>
            <div class="col-6">
                <input type="text" class="form-control" id="framework_name" name="framework_name" value="T-Django">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="framework_version" value="10.11">
            </div>
        </div>
        <div class="form-group row">
            <label class="form-label col-2" for="database_name">Database:</label>
            <div class="col-6">
                <input type="text" class="form-control" id="database_name" name="database_name" value="T-MySQL">
            </div>
            <div class="col-3">
                <input type="text" class="form-control" name="database_version" value="8.11">
            </div>
        </div>
        <div class="form-group col-12">
            <label class="form-label">Docker File Links:</label>
            <textarea class="form-control quill-editor" name="docker_files_links">
https://raw.githubusercontent.com/gocolab/co_templates/data_analysis/.env
https://raw.githubusercontent.com/gocolab/co_templates/data_analysis/Dockerfile
https://raw.githubusercontent.com/gocolab/co_templates/data_analysis/docker-compose.yml


            </textarea>
        </div>
        <div class="form-group col-12">
            <label class="form-label">Required Package Versions:</label>
            <textarea class="form-control quill-editor" name="required_packages_versions">
Django=5.22
React=16.11
jupyterlab=2.1
            </textarea>
        </div>
        <div class="form-group col-12">
            <label class="form-label">Description</label>
            <div id="description_delta" class="quill-editor"></div>
            <input type="hidden" name="description" id="description">
        </div>
        <div class="col-12 d-flex justify-content-end">
            <input type="hidden" name="main_router" value="{{main_router}}">
            <button type="submit" class="btn btn-primary" formaction="/{{main_router}}/insert">
                Insert
            </button>
        </div>
    </div>
</form>
{% endblock %}

{% block foot_javascripts %}
<!-- Include Quill library -->
<script src="https://cdn.jsdelivr.net/npm/quill@2.0.0-beta.0/dist/quill.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var quillDescription = new Quill('#description_delta', {
            theme: 'snow'
        });

        // Delta 값을 편집기에 적용
        quillDescription.setContents('insert value\r\nupdate value');
        // Submit handler
        var form = document.querySelector('form');
        form.onsubmit = function (event) {
            var description_delta = document.querySelector('#description');
            description_delta.value = JSON.stringify(quillDescription.getContents());
            return true; // return false to cancel form action
        };
    });
</script>

{% endblock %}